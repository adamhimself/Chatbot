{
  "$kind": "Microsoft.AdaptiveDialog",
  "$designer": {
    "name": "DashboardBot",
    "description": "",
    "id": "A79tBe"
  },
  "autoEndDialog": true,
  "defaultResultProperty": "dialog.result",
  "triggers": [
    {
      "$kind": "Microsoft.OnConversationUpdateActivity",
      "$designer": {
        "id": "376720"
      },
      "actions": [
        {
          "$kind": "Microsoft.Foreach",
          "$designer": {
            "id": "518944",
            "name": "Loop: for each item"
          },
          "itemsProperty": "turn.Activity.membersAdded",
          "actions": [
            {
              "$kind": "Microsoft.IfCondition",
              "$designer": {
                "id": "641773",
                "name": "Branch: if/else"
              },
              "condition": "string(dialog.foreach.value.id) != string(turn.Activity.Recipient.id)",
              "actions": [
                {
                  "$kind": "Microsoft.SendActivity",
                  "$designer": {
                    "id": "859266",
                    "name": "Send a response"
                  },
                  "activity": "${SendActivity_Greeting()}"
                }
              ]
            }
          ],
          "value": "dialog.foreach.value",
          "index": "dialog.foreach.index"
        }
      ]
    },
    {
      "$kind": "Microsoft.OnUnknownIntent",
      "$designer": {
        "id": "mb2n1u"
      },
      "actions": [
        {
          "$kind": "Microsoft.SendActivity",
          "$designer": {
            "id": "kMjqz1"
          },
          "activity": "${SendActivity_DidNotUnderstand()}"
        }
      ]
    },
    {
      "$kind": "Microsoft.OnIntent",
      "$designer": {
        "id": "gVZhhF",
        "name": "Reservations"
      },
      "intent": "Reservations",
      "actions": [
        {
          "$kind": "Microsoft.ChoiceInput",
          "$designer": {
            "id": "Wzqrzf"
          },
          "defaultLocale": "en-us",
          "disabled": false,
          "maxTurnCount": 3,
          "alwaysPrompt": false,
          "allowInterruptions": false,
          "prompt": "${ChoiceInput_Prompt_Wzqrzf()}",
          "unrecognizedPrompt": "",
          "invalidPrompt": "",
          "choiceOptions": {
            "includeNumbers": true,
            "inlineOrMore": ", or ",
            "inlineOr": " or ",
            "inlineSeparator": ", "
          },
          "style": "auto",
          "choices": [
            "Mijn reserveringen",
            "Reservering maken"
          ],
          "recognizerOptions": {
            "recognizeOrdinals": true,
            "recognizeNumbers": true
          },
          "outputFormat": "value",
          "property": "user.reservation"
        },
        {
          "$kind": "Microsoft.SetProperty",
          "$designer": {
            "id": "Y99FHa"
          },
          "property": "user.bearertoken",
          "value": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5PbzNaRHJPRFhFSzFqS1doWHNsSFJfS1hFZyIsImtpZCI6Im5PbzNaRHJPRFhFSzFqS1doWHNsSFJfS1hFZyJ9.eyJhdWQiOiJhNzY2NDhmMC01MjYzLTQxZjYtOWRhMC1lNzNiNzFmYjBkYjYiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC9iZjJhNTA1ZS1jZjEyLTQyNGMtYTBkNS00NTc3NjA4ZWExMjEvIiwiaWF0IjoxNjIzNzUzMTQzLCJuYmYiOjE2MjM3NTMxNDMsImV4cCI6MTYyMzc1NzA0MywiYWNyIjoiMSIsImFpbyI6IkFTUUEyLzhUQUFBQW9VSThVcnk4MmRGeUE3aVRGUHFtMWtGT0kxdjExK29qT2xjSnZjRFlZZE09IiwiYW1yIjpbInB3ZCJdLCJhcHBpZCI6IjA1MTFmOGIyLTNiNjUtNGU3My1hMGQwLWM1ZmVkMGVjYjkwNiIsImFwcGlkYWNyIjoiMSIsImZhbWlseV9uYW1lIjoiQ2xpZW50IiwiZ2l2ZW5fbmFtZSI6IlBvc3RtYW4iLCJncm91cHMiOlsiZjYxZmI4NWItNWE4MC00Mjg5LTgwZWUtN2UyZjFiZGE3ZmIzIiwiMWI1ZWQ1MDktMjBiOC00YzE5LWE5NDUtZTgyMWZiMDQ5NWE2Il0sImlwYWRkciI6IjMxLjE2MC4zNC4xMDYiLCJuYW1lIjoiUG9zdG1hbiBDbGllbnQiLCJvaWQiOiI1ZTEzMjhmMC0wYTFhLTQ4OWUtOWIxMC0xMjM5NGRlZGFhNmYiLCJyaCI6IjAuQVNFQVhsQXF2eExQVEVLZzFVVjNZSTZoSWJMNEVRVmxPM05Pb05ERl90RHN1UVloQUZvLiIsInNjcCI6InVzZXJfaW1wZXJzb25hdGlvbiIsInN1YiI6IlQzOEcxM01rcFMzVWdPek5ZaU4wTEdwanczMU9tUVV6cmVyV200SkZUSGsiLCJ0aWQiOiJiZjJhNTA1ZS1jZjEyLTQyNGMtYTBkNS00NTc3NjA4ZWExMjEiLCJ1bmlxdWVfbmFtZSI6InBvc3RtYW5AYmVzZW5zZS5vbm1pY3Jvc29mdC5jb20iLCJ1cG4iOiJwb3N0bWFuQGJlc2Vuc2Uub25taWNyb3NvZnQuY29tIiwidXRpIjoiUXI5ZkFHM2FNMEtIYno3a2NKd1VBQSIsInZlciI6IjEuMCIsIndpZHMiOlsiYjc5ZmJmNGQtM2VmOS00Njg5LTgxNDMtNzZiMTk0ZTg1NTA5Il19.KwpuoH39xZ4mjrwxP7M9J1NfuSa6NlmpRSSh9v4_mI8xUaYy4beSVn8e9vwH8zcpBj1PZSucrplSd1ZUQpRzlYQLNNnbYs1w-qdMXsxlPOZMymbkoGq3glC_dkL0rhI53Hi1a8I1iPe2dB3GQ2MEESADMQigq1nVTKDvDZAdJjALcEAHVsN4Pkl8yu4VIzKi8NnpGInMshbK0UnczE159nYstqsrEtbjLNsbn8TdSwAUyfAfehQxHqvzKDRNrvwSMuFFf3oNrlDY1Grwfw6JkewJLPjc3eDAONcs926oyJNXKeR8Z-4BVU5Y5vKUrXoYU215xtxdeWgTDA_xVkImNw"
        },
        {
          "$kind": "Microsoft.SwitchCondition",
          "$designer": {
            "id": "UxnUeu"
          },
          "cases": [
            {
              "actions": [
                {
                  "$kind": "Microsoft.SendActivity",
                  "$designer": {
                    "id": "DoMmO9"
                  },
                  "activity": "${SendActivity_DoMmO9()}"
                },
                {
                  "$kind": "Microsoft.HttpRequest",
                  "$designer": {
                    "id": "qlUyAU"
                  },
                  "resultProperty": "dialog.reservations_response",
                  "method": "GET",
                  "url": "https://becore-api-test.azurewebsites.net/users/5e1328f0-0a1a-489e-9b10-12394dedaa6f/reservations?fromDate=2021-05-10T08:00:00Z&toDate=2021-06-30T08:00:00Z",
                  "headers": {
                    "Authorization": "bearer ${user.bearertoken}"
                  },
                  "responseType": "json",
                  "contentType": "application/json"
                },
                {
                  "$kind": "Microsoft.IfCondition",
                  "$designer": {
                    "id": "I4lwyq"
                  },
                  "condition": "dialog.reservations_response.statusCode == 200",
                  "actions": [
                    {
                      "$kind": "Microsoft.Foreach",
                      "$designer": {
                        "id": "ITxY3l"
                      },
                      "index": "dialog.foreach.index",
                      "value": "dialog.foreach.value",
                      "itemsProperty": "dialog.reservations_response.content",
                      "actions": [
                        {
                          "$kind": "Microsoft.SendActivity",
                          "$designer": {
                            "id": "yJBFOR"
                          },
                          "activity": "${SendActivity_yJBFOR()}"
                        }
                      ]
                    }
                  ],
                  "elseActions": [
                    {
                      "$kind": "Microsoft.SendActivity",
                      "$designer": {
                        "id": "1DWoCd"
                      },
                      "activity": "${SendActivity_1DWoCd()}"
                    }
                  ]
                }
              ],
              "value": "Mijn reserveringen"
            },
            {
              "actions": [
                {
                  "$kind": "Microsoft.ChoiceInput",
                  "$designer": {
                    "id": "zLSMxu"
                  },
                  "defaultLocale": "en-us",
                  "disabled": false,
                  "maxTurnCount": 3,
                  "alwaysPrompt": false,
                  "allowInterruptions": false,
                  "prompt": "${ChoiceInput_Prompt_zLSMxu()}",
                  "unrecognizedPrompt": "",
                  "invalidPrompt": "",
                  "defaultValueResponse": "",
                  "choiceOptions": {
                    "includeNumbers": true,
                    "inlineOrMore": ", or ",
                    "inlineOr": " or ",
                    "inlineSeparator": ", "
                  },
                  "property": "user.workspaces",
                  "outputFormat": "value",
                  "choices": [
                    "Desk 0-A-1: Aanlandwerkplek",
                    "Desk 0-C-3: Concentratie werkplek",
                    "Desk 0-B-4: Stilte werkplek",
                    "Desk 0-A-3: Sta werkplek"
                  ],
                  "style": "heroCard"
                },
                {
                  "$kind": "Microsoft.SetProperties",
                  "$designer": {
                    "id": "Oy2t4M"
                  },
                  "assignments": [
                    {
                      "property": "user.desk",
                      "value": "='leeg'"
                    },
                    {
                      "property": "user.guid",
                      "value": "='leeg'"
                    }
                  ]
                },
                {
                  "$kind": "Microsoft.SwitchCondition",
                  "$designer": {
                    "id": "CslSJJ"
                  },
                  "condition": "=user.workspaces",
                  "cases": [
                    {
                      "value": "Desk 0-A-1: Aanlandwerkplek",
                      "actions": [
                        {
                          "$kind": "Microsoft.SetProperties",
                          "$designer": {
                            "id": "j6I1GA"
                          },
                          "assignments": [
                            {
                              "property": "user.guid",
                              "value": "='b2ee4947-15c0-4673-ab7a-df23c97a8ddb'"
                            },
                            {
                              "property": "user.desk",
                              "value": "='Desk 0-A-1: Aanlandwerkplek'"
                            }
                          ]
                        },
                        {
                          "$kind": "Microsoft.SetProperty",
                          "$designer": {
                            "id": "abQq8f"
                          },
                          "property": "user.guid",
                          "value": "='b2ee4947-15c0-4673-ab7a-df23c97a8ddb'"
                        }
                      ]
                    },
                    {
                      "value": "Desk 0-C-3: Concentratie werkplek"
                    },
                    {
                      "value": "Desk 0-B-4: Stilte werkplek"
                    },
                    {
                      "value": "Desk 0-A-3: Sta werkplek"
                    }
                  ]
                },
                {
                  "$kind": "Microsoft.TextInput",
                  "$designer": {
                    "id": "f0Lkum"
                  },
                  "disabled": false,
                  "maxTurnCount": 3,
                  "alwaysPrompt": false,
                  "allowInterruptions": false,
                  "unrecognizedPrompt": "",
                  "invalidPrompt": "",
                  "prompt": "${TextInput_Prompt_f0Lkum()}",
                  "property": "user.date"
                },
                {
                  "$kind": "Microsoft.TextInput",
                  "$designer": {
                    "id": "Nbv43T"
                  },
                  "disabled": false,
                  "maxTurnCount": 3,
                  "alwaysPrompt": false,
                  "allowInterruptions": false,
                  "unrecognizedPrompt": "",
                  "invalidPrompt": "",
                  "defaultValueResponse": "",
                  "prompt": "${TextInput_Prompt_Nbv43T()}",
                  "property": "user.fromto"
                },
                {
                  "$kind": "Microsoft.ConfirmInput",
                  "$designer": {
                    "id": "2VsGZF"
                  },
                  "defaultLocale": "en-us",
                  "disabled": false,
                  "maxTurnCount": 3,
                  "alwaysPrompt": false,
                  "allowInterruptions": false,
                  "unrecognizedPrompt": "",
                  "invalidPrompt": "",
                  "defaultValueResponse": "",
                  "prompt": "${ConfirmInput_Prompt_2VsGZF()}",
                  "choiceOptions": {
                    "includeNumbers": true,
                    "inlineOrMore": ", or ",
                    "inlineOr": " or ",
                    "inlineSeparator": ", "
                  },
                  "property": "user.confirm"
                },
                {
                  "$kind": "Microsoft.IfCondition",
                  "$designer": {
                    "id": "SbzSqm"
                  },
                  "actions": [
                    {
                      "$kind": "Microsoft.SendActivity",
                      "$designer": {
                        "id": "Ttc2oI"
                      },
                      "activity": "${SendActivity_Ttc2oI()}"
                    },
                    {
                      "$kind": "Microsoft.HttpRequest",
                      "$designer": {
                        "id": "UFMtUI"
                      },
                      "resultProperty": "dialog.reservationscreate_response",
                      "method": "POST",
                      "url": "https://becore-api-test.azurewebsites.net/venues/c70f09eb-32ea-419f-a197-847e7d0297a6/reservableitems/${user.guid}/reservations",
                      "body": {
                        "start": "2021-06-16T13:00:00Z",
                        "end": "2021-06-16T16:00:00Z",
                        "title": "DESK"
                      },
                      "contentType": "application/json",
                      "responseType": "json",
                      "headers": {
                        "Authorization": "bearer ${user.bearertoken}"
                      }
                    },
                    {
                      "$kind": "Microsoft.IfCondition",
                      "$designer": {
                        "id": "lYhxNg"
                      },
                      "condition": "=dialog.reservationscreate_response.statusCode == 200",
                      "elseActions": [
                        {
                          "$kind": "Microsoft.SendActivity",
                          "$designer": {
                            "id": "PIqtSY"
                          },
                          "activity": "${SendActivity_PIqtSY()}"
                        }
                      ],
                      "actions": [
                        {
                          "$kind": "Microsoft.SendActivity",
                          "$designer": {
                            "id": "6o3TgC"
                          },
                          "activity": "${SendActivity_6o3TgC()}"
                        }
                      ]
                    }
                  ],
                  "condition": "user.confirm == true"
                },
                {
                  "$kind": "Microsoft.SendActivity",
                  "$designer": {
                    "id": "NSAtLX"
                  },
                  "activity": "${SendActivity_NSAtLX()}"
                }
              ],
              "value": "Reservering maken"
            }
          ],
          "default": [
            {
              "$kind": "Microsoft.SendActivity",
              "$designer": {
                "id": "sJXQBp"
              },
              "activity": "${SendActivity_sJXQBp()}"
            }
          ],
          "condition": "=user.reservation"
        }
      ]
    }
  ],
  "generator": "DashboardBot.lg",
  "id": "DashboardBot",
  "recognizer": {
    "$kind": "Microsoft.RegexRecognizer",
    "intents": [
      {
        "intent": "Reservations",
        "pattern": "reserveren"
      }
    ]
  }
}
