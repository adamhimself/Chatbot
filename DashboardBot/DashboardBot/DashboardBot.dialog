{
  "$kind": "Microsoft.AdaptiveDialog",
  "$designer": {
    "name": "DashboardBot",
    "description": "",
    "id": "A79tBe"
  },
  "autoEndDialog": true,
  "defaultResultProperty": "dialog.result",
  "triggers": [
    {
      "$kind": "Microsoft.OnConversationUpdateActivity",
      "$designer": {
        "id": "376720"
      },
      "actions": [
        {
          "$kind": "Microsoft.Foreach",
          "$designer": {
            "id": "518944",
            "name": "Loop: for each item"
          },
          "itemsProperty": "turn.Activity.membersAdded",
          "actions": [
            {
              "$kind": "Microsoft.IfCondition",
              "$designer": {
                "id": "641773",
                "name": "Branch: if/else"
              },
              "condition": "string(dialog.foreach.value.id) != string(turn.Activity.Recipient.id)",
              "actions": [
                {
                  "$kind": "Microsoft.SendActivity",
                  "$designer": {
                    "id": "859266",
                    "name": "Send a response"
                  },
                  "activity": "${SendActivity_Greeting()}"
                }
              ]
            }
          ],
          "value": "dialog.foreach.value",
          "index": "dialog.foreach.index"
        }
      ]
    },
    {
      "$kind": "Microsoft.OnUnknownIntent",
      "$designer": {
        "id": "mb2n1u"
      },
      "actions": [
        {
          "$kind": "Microsoft.SendActivity",
          "$designer": {
            "id": "kMjqz1"
          },
          "activity": "${SendActivity_DidNotUnderstand()}"
        }
      ]
    },
    {
      "$kind": "Microsoft.OnIntent",
      "$designer": {
        "id": "gVZhhF",
        "name": "Reservations"
      },
      "intent": "Reservations",
      "actions": [
        {
          "$kind": "Microsoft.ChoiceInput",
          "$designer": {
            "id": "Wzqrzf"
          },
          "defaultLocale": "en-us",
          "disabled": false,
          "maxTurnCount": 3,
          "alwaysPrompt": false,
          "allowInterruptions": false,
          "prompt": "${ChoiceInput_Prompt_Wzqrzf()}",
          "unrecognizedPrompt": "",
          "invalidPrompt": "",
          "choiceOptions": {
            "includeNumbers": true,
            "inlineOrMore": ", or ",
            "inlineOr": " or ",
            "inlineSeparator": ", "
          },
          "style": "auto",
          "choices": [
            "Mijn reserveringen",
            "Beschikbare ruimtes",
            "Niks"
          ],
          "recognizerOptions": {
            "recognizeOrdinals": true,
            "recognizeNumbers": true
          },
          "outputFormat": "value",
          "property": "user.reservation"
        },
        {
          "$kind": "Microsoft.SetProperty",
          "$designer": {
            "id": "Y99FHa"
          },
          "property": "user.bearertoken",
          "value": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Im5PbzNaRHJPRFhFSzFqS1doWHNsSFJfS1hFZyIsImtpZCI6Im5PbzNaRHJPRFhFSzFqS1doWHNsSFJfS1hFZyJ9.eyJhdWQiOiJhNzY2NDhmMC01MjYzLTQxZjYtOWRhMC1lNzNiNzFmYjBkYjYiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC9iZjJhNTA1ZS1jZjEyLTQyNGMtYTBkNS00NTc3NjA4ZWExMjEvIiwiaWF0IjoxNjIzNzQxNjc5LCJuYmYiOjE2MjM3NDE2NzksImV4cCI6MTYyMzc0NTU3OSwiYWNyIjoiMSIsImFpbyI6IkUyWmdZTGlkMGVJcCtpbUZKM1Nyb2NscTl2a1R4QXREUGZKc24xNE9NODNWdEk0T21BMEEiLCJhbXIiOlsicHdkIl0sImFwcGlkIjoiMDUxMWY4YjItM2I2NS00ZTczLWEwZDAtYzVmZWQwZWNiOTA2IiwiYXBwaWRhY3IiOiIxIiwiZmFtaWx5X25hbWUiOiJDbGllbnQiLCJnaXZlbl9uYW1lIjoiUG9zdG1hbiIsImdyb3VwcyI6WyJmNjFmYjg1Yi01YTgwLTQyODktODBlZS03ZTJmMWJkYTdmYjMiLCIxYjVlZDUwOS0yMGI4LTRjMTktYTk0NS1lODIxZmIwNDk1YTYiXSwiaXBhZGRyIjoiMzEuMTYwLjM0LjEwNiIsIm5hbWUiOiJQb3N0bWFuIENsaWVudCIsIm9pZCI6IjVlMTMyOGYwLTBhMWEtNDg5ZS05YjEwLTEyMzk0ZGVkYWE2ZiIsInJoIjoiMC5BU0VBWGxBcXZ4TFBURUtnMVVWM1lJNmhJYkw0RVFWbE8zTk9vTkRGX3REc3VRWWhBRm8uIiwic2NwIjoidXNlcl9pbXBlcnNvbmF0aW9uIiwic3ViIjoiVDM4RzEzTWtwUzNVZ096TllpTjBMR3BqdzMxT21RVXpyZXJXbTRKRlRIayIsInRpZCI6ImJmMmE1MDVlLWNmMTItNDI0Yy1hMGQ1LTQ1Nzc2MDhlYTEyMSIsInVuaXF1ZV9uYW1lIjoicG9zdG1hbkBiZXNlbnNlLm9ubWljcm9zb2Z0LmNvbSIsInVwbiI6InBvc3RtYW5AYmVzZW5zZS5vbm1pY3Jvc29mdC5jb20iLCJ1dGkiOiJ1VG1lRUtHWDVVV20zaVhoeTc2dUFBIiwidmVyIjoiMS4wIiwid2lkcyI6WyJiNzlmYmY0ZC0zZWY5LTQ2ODktODE0My03NmIxOTRlODU1MDkiXX0.jYNzmr64adufw6ytGR4MvVvMhBhMfVGJ6IYVasI6XHLYPqYS5VqiMcLJXSY403LnZ11Bzw8AHgpXtxTW_D9MDdxc0EmIXr1f22e2k3PY2epzyNGRKGztlRcGqjTYBIB49UElwuyloxMKAxuOkOApcr2clZxhUGviXTdkNRCBO4FhwL5aEKC7uwuGPrQNC5kvnioXlkLAZXE2Mw2xSrDIHmprcCgt7QE594CTd8K3t4otUwEsBycclM12WWDVDT3YCOaiqmoi11mgOP-83fgIUSM2LQrbZ9TV_Dzd-6sTkoYBgFiMEibzrRH0RHMz5Z3t1vMzt5I3dkWZnnHj1A3oAA"
        },
        {
          "$kind": "Microsoft.SwitchCondition",
          "$designer": {
            "id": "UxnUeu"
          },
          "cases": [
            {
              "actions": [
                {
                  "$kind": "Microsoft.SendActivity",
                  "$designer": {
                    "id": "DoMmO9"
                  },
                  "activity": "${SendActivity_DoMmO9()}"
                },
                {
                  "$kind": "Microsoft.HttpRequest",
                  "$designer": {
                    "id": "qlUyAU"
                  },
                  "resultProperty": "dialog.reservations_response",
                  "method": "GET",
                  "url": "https://becore-api-test.azurewebsites.net/users/5e1328f0-0a1a-489e-9b10-12394dedaa6f/reservations?fromDate=2021-05-10T08:00:00Z&toDate=2021-06-30T08:00:00Z",
                  "headers": {
                    "Authorization": "bearer ${user.bearertoken}"
                  },
                  "responseType": "json",
                  "contentType": "application/json"
                },
                {
                  "$kind": "Microsoft.IfCondition",
                  "$designer": {
                    "id": "I4lwyq"
                  },
                  "condition": "dialog.reservations_response.statusCode == 200",
                  "actions": [
                    {
                      "$kind": "Microsoft.Foreach",
                      "$designer": {
                        "id": "ITxY3l"
                      },
                      "index": "dialog.foreach.index",
                      "value": "dialog.foreach.value",
                      "itemsProperty": "dialog.reservations_response.content",
                      "actions": [
                        {
                          "$kind": "Microsoft.SendActivity",
                          "$designer": {
                            "id": "yJBFOR"
                          },
                          "activity": "${SendActivity_yJBFOR()}"
                        }
                      ]
                    }
                  ],
                  "elseActions": [
                    {
                      "$kind": "Microsoft.SendActivity",
                      "$designer": {
                        "id": "1DWoCd"
                      },
                      "activity": "${SendActivity_1DWoCd()}"
                    }
                  ]
                }
              ],
              "value": "Mijn reserveringen"
            },
            {
              "actions": [
                {
                  "$kind": "Microsoft.ChoiceInput",
                  "$designer": {
                    "id": "zLSMxu"
                  },
                  "defaultLocale": "en-us",
                  "disabled": false,
                  "maxTurnCount": 3,
                  "alwaysPrompt": false,
                  "allowInterruptions": false,
                  "prompt": "${ChoiceInput_Prompt_zLSMxu()}",
                  "unrecognizedPrompt": "",
                  "invalidPrompt": "",
                  "defaultValueResponse": "",
                  "choiceOptions": {
                    "includeNumbers": true,
                    "inlineOrMore": ", or ",
                    "inlineOr": " or ",
                    "inlineSeparator": ", "
                  },
                  "property": "user.workspaces",
                  "outputFormat": "value",
                  "choices": [
                    "Desk 0-A-1: Aanlandwerkplek",
                    "Desk 0-C-3: Concentratie werkplek",
                    "Desk 0-B-4: Stilte werkplek",
                    "Desk 0-A-3: Sta werkplek"
                  ]
                },
                {
                  "$kind": "Microsoft.SetProperties",
                  "$designer": {
                    "id": "Oy2t4M"
                  },
                  "assignments": [
                    {
                      "property": "user.deskA1"
                    }
                  ]
                },
                {
                  "$kind": "Microsoft.SwitchCondition",
                  "$designer": {
                    "id": "CslSJJ"
                  },
                  "condition": "=user.workspaces",
                  "cases": [
                    {
                      "value": "Desk 0-A-1: Aanlandwerkplek",
                      "actions": [
                        {
                          "$kind": "Microsoft.SetProperty",
                          "$designer": {
                            "id": "abQq8f"
                          },
                          "property": "user.desk",
                          "value": "b2ee4947-15c0-4673-ab7a-df23c97a8ddb"
                        }
                      ]
                    },
                    {
                      "value": "Desk 0-C-3: Concentratie werkplek"
                    },
                    {
                      "value": "Desk 0-B-4: Stilte werkplek"
                    },
                    {
                      "value": "Desk 0-A-3: Sta werkplek"
                    }
                  ]
                },
                {
                  "$kind": "Microsoft.SendActivity",
                  "$designer": {
                    "id": "NSAtLX"
                  },
                  "activity": "${SendActivity_NSAtLX()}"
                }
              ],
              "value": "Beschikbare ruimtes"
            },
            {
              "actions": [
                {
                  "$kind": "Microsoft.SendActivity",
                  "$designer": {
                    "id": "dmNZbv"
                  },
                  "activity": "${SendActivity_dmNZbv()}"
                }
              ],
              "value": "Niks"
            }
          ],
          "default": [
            {
              "$kind": "Microsoft.SendActivity",
              "$designer": {
                "id": "sJXQBp"
              },
              "activity": "${SendActivity_sJXQBp()}"
            }
          ],
          "condition": "=user.reservation"
        }
      ]
    }
  ],
  "generator": "DashboardBot.lg",
  "id": "DashboardBot",
  "recognizer": {
    "$kind": "Microsoft.RegexRecognizer",
    "intents": [
      {
        "intent": "Reservations",
        "pattern": "reserveren"
      }
    ]
  }
}
